{"version":3,"sources":["AnimationRunners.ts"],"names":["Animated","Easing","Clock","Value","block","cond","stopClock","set","startClock","clockRunning","not","and","reTiming","timing","reDecay","decay","reSpring","spring","SpringUtils","defaultSpringConfig","makeDefaultConfig","onInit","clock","sequence","animate","fn","state","config","from","finished","time","position","params","easing","linear","duration","to","frameTime","toValue","velocity","deceleration","springConfig","delay","node","loop","loopConfig","boomerang","autoStart"],"mappings":"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","sourcesContent":["import Animated, { Easing } from \"react-native-reanimated\";\nimport { SpringConfig } from \"./Animations\";\n\nconst {\n  Clock,\n  Value,\n  block,\n  cond,\n  stopClock,\n  set,\n  startClock,\n  clockRunning,\n  not,\n  and,\n  timing: reTiming,\n  decay: reDecay,\n  spring: reSpring,\n  SpringUtils,\n} = Animated;\n\nconst defaultSpringConfig = SpringUtils.makeDefaultConfig();\n\ninterface AnimateParams<S, C> {\n  clock: Animated.Clock;\n  fn: (\n    clock: Animated.Clock,\n    state: S,\n    config: C\n  ) => Animated.Adaptable<number>;\n  state: S;\n  config: C;\n  from: Animated.Adaptable<number>;\n}\n\ninterface TimingAnimation {\n  state: Animated.TimingState;\n  config: Animated.TimingConfig;\n}\n\ninterface SpringAnimation {\n  state: Animated.SpringState;\n  config: Animated.SpringConfig;\n}\n\ninterface DecayAnimation {\n  state: Animated.DecayState;\n  config: Animated.DecayConfig;\n}\n\ntype Animation = SpringAnimation | DecayAnimation | TimingAnimation;\n\nconst onInit = (clock: Animated.Clock, sequence: Animated.Adaptable<number>) =>\n  cond(not(clockRunning(clock)), sequence);\n\nconst animate = <T extends Animation>({\n  fn,\n  clock,\n  state,\n  config,\n  from,\n}: AnimateParams<T[\"state\"], T[\"config\"]>) =>\n  block([\n    onInit(clock, [\n      set(state.finished, 0),\n      set(state.time, 0),\n      set(state.position, from),\n      startClock(clock),\n    ]),\n    fn(clock, state, config),\n    cond(state.finished, stopClock(clock)),\n    state.position,\n  ]);\n\nexport interface TimingParams {\n  clock?: Animated.Clock;\n  from?: Animated.Adaptable<number>;\n  to?: Animated.Adaptable<number>;\n  duration?: Animated.Adaptable<number>;\n  easing?: Animated.EasingFunction;\n}\n\nexport const timing = (params: TimingParams) => {\n  const { clock, easing, duration, from, to } = {\n    clock: new Clock(),\n    easing: Easing.linear,\n    duration: 250,\n    from: 0,\n    to: 1,\n    ...params,\n  };\n\n  const state: Animated.TimingState = {\n    finished: new Value(0),\n    position: new Value(0),\n    time: new Value(0),\n    frameTime: new Value(0),\n  };\n\n  const config = {\n    toValue: new Value(0),\n    duration,\n    easing,\n  };\n\n  return block([\n    onInit(clock, [set(config.toValue, to), set(state.frameTime, 0)]),\n    animate<TimingAnimation>({\n      clock,\n      fn: reTiming,\n      state,\n      config,\n      from,\n    }),\n  ]);\n};\n\nexport interface DecayParams {\n  clock?: Animated.Clock;\n  from?: Animated.Adaptable<number>;\n  velocity?: Animated.Adaptable<number>;\n  deceleration?: Animated.Adaptable<number>;\n}\n\nexport const decay = (params: DecayParams) => {\n  const { clock, from, velocity, deceleration } = {\n    clock: new Clock(),\n    velocity: new Value(0),\n    deceleration: 0.998,\n    from: 0,\n    ...params,\n  };\n\n  const state: Animated.DecayState = {\n    finished: new Value(0),\n    position: new Value(0),\n    time: new Value(0),\n    velocity: new Value(0),\n  };\n\n  const config: Animated.DecayConfig = {\n    deceleration,\n  };\n\n  return block([\n    onInit(clock, [set(state.velocity, velocity)]),\n    animate<DecayAnimation>({\n      clock,\n      fn: reDecay,\n      state,\n      config,\n      from,\n    }),\n  ]);\n};\n\nexport interface SpringParams {\n  clock?: Animated.Clock;\n  from?: Animated.Adaptable<number>;\n  to: Animated.Adaptable<number>;\n  velocity?: Animated.Adaptable<number>;\n  config?: SpringConfig;\n}\n\nexport const spring = (params: SpringParams) => {\n  const { clock, from, velocity, config: springConfig, to } = {\n    clock: new Clock(),\n    velocity: new Value(0),\n    from: 0,\n    ...params,\n  };\n\n  const state: Animated.SpringState = {\n    finished: new Value(0),\n    position: new Value(0),\n    time: new Value(0),\n    velocity: new Value(0),\n  };\n\n  const config = {\n    ...defaultSpringConfig,\n    toValue: new Value(0),\n    ...springConfig,\n  };\n\n  return block([\n    onInit(clock, [set(config.toValue, to), set(state.velocity, velocity)]),\n    animate<SpringAnimation>({\n      clock,\n      fn: reSpring,\n      state,\n      config,\n      from,\n    }),\n  ]);\n};\n\nexport const delay = (node: Animated.Node<number>, duration: number) => {\n  const clock = new Clock();\n  return block([\n    timing({ clock, from: 0, to: 1, duration }),\n    cond(not(clockRunning(clock)), node),\n  ]);\n};\n\nexport interface LoopProps {\n  clock?: Animated.Clock;\n  easing?: Animated.EasingFunction;\n  duration?: number;\n  boomerang?: boolean;\n  autoStart?: boolean;\n}\n\nexport const loop = (loopConfig: LoopProps) => {\n  const { clock, easing, duration, boomerang, autoStart } = {\n    clock: new Clock(),\n    easing: Easing.linear,\n    duration: 250,\n    boomerang: false,\n    autoStart: true,\n    ...loopConfig,\n  };\n  const state = {\n    finished: new Value(0),\n    position: new Value(0),\n    time: new Value(0),\n    frameTime: new Value(0),\n  };\n  const config = {\n    toValue: new Value(1),\n    duration,\n    easing,\n  };\n\n  return block([\n    cond(and(not(clockRunning(clock)), autoStart ? 1 : 0), startClock(clock)),\n    reTiming(clock, state, config),\n    cond(state.finished, [\n      set(state.finished, 0),\n      set(state.time, 0),\n      set(state.frameTime, 0),\n      boomerang\n        ? set(config.toValue, cond(config.toValue, 0, 1))\n        : set(state.position, 0),\n    ]),\n    state.position,\n  ]);\n};\n"]}