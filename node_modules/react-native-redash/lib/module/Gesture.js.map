{"version":3,"sources":["Gesture.ts"],"names":["Animated","State","snapPoint","Clock","Value","event","add","block","cond","eq","multiply","set","stopClock","and","not","clockRunning","startClock","neq","call","reDecay","decay","reSpring","spring","onChange","debug","withScaleOffset","value","state","offset","END","withOffset","withSpring","props","velocity","snapPoints","springConfig","config","onSnap","clock","springState","finished","position","time","toValue","damping","mass","stiffness","overshootClamping","restSpeedThreshold","restDisplacementThreshold","gestureAndAnimationIsOver","isSpringInterrupted","BEGAN","finishSpring","snap","withDecay","deceleration","decayState","isDecayInterrupted","finishDecay","onScrollEvent","contentOffset","nativeEvent","onGestureEvent","gestureEvent","onHandlerStateChange","panGestureHandler","x","translationX","velocityX","y","translationY","velocityY","UNDETERMINED","gestureHandler","horizontalPanGestureHandler","verticalPanGestureHandler","debugGestureState","label","d","ACTIVE","CANCELLED"],"mappings":"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","sourcesContent":["import Animated from \"react-native-reanimated\";\nimport {\n  FlingGestureHandlerEventExtra,\n  ForceTouchGestureHandlerEventExtra,\n  GestureHandlerStateChangeNativeEvent,\n  LongPressGestureHandlerEventExtra,\n  PanGestureHandlerEventExtra,\n  PinchGestureHandlerEventExtra,\n  RotationGestureHandlerEventExtra,\n  State,\n  TapGestureHandlerEventExtra,\n} from \"react-native-gesture-handler\";\n\nimport { snapPoint } from \"./Animations\";\n\nconst {\n  Clock,\n  Value,\n  event,\n  add,\n  block,\n  cond,\n  eq,\n  multiply,\n  set,\n  stopClock,\n  and,\n  not,\n  clockRunning,\n  startClock,\n  neq,\n  call,\n  decay: reDecay,\n  spring: reSpring,\n  onChange,\n  debug,\n} = Animated;\n\nexport const withScaleOffset = (\n  value: Animated.Node<number>,\n  state: Animated.Node<State>,\n  offset: Animated.Value<number> = new Value(1)\n) =>\n  cond(\n    eq(state, State.END),\n    [set(offset, multiply(offset, value)), offset],\n    multiply(offset, value)\n  );\n\nexport const withOffset = (\n  value: Animated.Node<number>,\n  state: Animated.Node<State>,\n  offset: Animated.Value<number> = new Value(0)\n) =>\n  cond(\n    eq(state, State.END),\n    [set(offset, add(offset, value)), offset],\n    add(offset, value)\n  );\n\ninterface PrivateSpringConfig extends Animated.SpringConfig {\n  toValue: Animated.Value<number>;\n}\n\ntype SpringConfig = Omit<Animated.SpringConfig, \"toValue\">;\n\nexport interface WithSpringParams {\n  value: Animated.Adaptable<number>;\n  velocity: Animated.Adaptable<number>;\n  state: Animated.Node<State>;\n  snapPoints: Animated.Adaptable<number>[];\n  offset?: Animated.Value<number>;\n  config?: SpringConfig;\n  onSnap?: (value: readonly number[]) => void;\n}\n\nexport const withSpring = (props: WithSpringParams) => {\n  const {\n    value,\n    velocity,\n    state,\n    snapPoints,\n    offset,\n    config: springConfig,\n    onSnap,\n  } = {\n    offset: new Value(0),\n    ...props,\n  };\n  const clock = new Clock();\n  const springState: Animated.SpringState = {\n    finished: new Value(0),\n    velocity: new Value(0),\n    position: new Value(0),\n    time: new Value(0),\n  };\n\n  const config: PrivateSpringConfig = {\n    toValue: new Value(0),\n    damping: 6,\n    mass: 1,\n    stiffness: 64,\n    overshootClamping: false,\n    restSpeedThreshold: 0.01,\n    restDisplacementThreshold: 0.01,\n    ...springConfig,\n  };\n\n  const gestureAndAnimationIsOver = new Value(1);\n  const isSpringInterrupted = and(eq(state, State.BEGAN), clockRunning(clock));\n  const finishSpring = [\n    set(offset, springState.position),\n    stopClock(clock),\n    set(gestureAndAnimationIsOver, 1),\n  ];\n  const snap = onSnap\n    ? [cond(clockRunning(clock), call([springState.position], onSnap))]\n    : [];\n  return block([\n    cond(isSpringInterrupted, finishSpring),\n    cond(gestureAndAnimationIsOver, set(springState.position, offset)),\n    cond(neq(state, State.END), [\n      set(gestureAndAnimationIsOver, 0),\n      set(springState.finished, 0),\n      set(springState.position, add(offset, value)),\n    ]),\n    cond(and(eq(state, State.END), not(gestureAndAnimationIsOver)), [\n      cond(and(not(clockRunning(clock)), not(springState.finished)), [\n        set(springState.velocity, velocity),\n        set(springState.time, 0),\n        set(\n          config.toValue,\n          snapPoint(springState.position, velocity, snapPoints)\n        ),\n        startClock(clock),\n      ]),\n      reSpring(clock, springState, config),\n      cond(springState.finished, [...snap, ...finishSpring]),\n    ]),\n    springState.position,\n  ]);\n};\n\ninterface WithDecayParams {\n  value: Animated.Adaptable<number>;\n  velocity: Animated.Adaptable<number>;\n  state: Animated.Node<State>;\n  offset?: Animated.Value<number>;\n  deceleration?: number;\n}\n\nexport const withDecay = (config: WithDecayParams) => {\n  const { value, velocity, state, offset, deceleration } = {\n    offset: new Value(0),\n    deceleration: 0.998,\n    ...config,\n  };\n  const clock = new Clock();\n  const decayState = {\n    finished: new Value(0),\n    velocity: new Value(0),\n    position: new Value(0),\n    time: new Value(0),\n  };\n\n  const isDecayInterrupted = and(eq(state, State.BEGAN), clockRunning(clock));\n  const finishDecay = [set(offset, decayState.position), stopClock(clock)];\n\n  return block([\n    cond(isDecayInterrupted, finishDecay),\n    cond(neq(state, State.END), [\n      set(decayState.finished, 0),\n      set(decayState.position, add(offset, value)),\n    ]),\n    cond(eq(state, State.END), [\n      cond(and(not(clockRunning(clock)), not(decayState.finished)), [\n        set(decayState.velocity, velocity),\n        set(decayState.time, 0),\n        startClock(clock),\n      ]),\n      reDecay(clock, decayState, { deceleration }),\n      cond(decayState.finished, finishDecay),\n    ]),\n    decayState.position,\n  ]);\n};\n\nexport const onScrollEvent = (contentOffset: {\n  x?: Animated.Node<number>;\n  y?: Animated.Node<number>;\n}) =>\n  event([\n    {\n      nativeEvent: {\n        contentOffset,\n      },\n    },\n  ]);\n\ntype NativeEvent = GestureHandlerStateChangeNativeEvent &\n  (\n    | PanGestureHandlerEventExtra\n    | TapGestureHandlerEventExtra\n    | LongPressGestureHandlerEventExtra\n    | RotationGestureHandlerEventExtra\n    | FlingGestureHandlerEventExtra\n    | PinchGestureHandlerEventExtra\n    | ForceTouchGestureHandlerEventExtra\n  );\n\ntype Adaptable<T> = { [P in keyof T]: Animated.Adaptable<T[P]> };\n\nexport const onGestureEvent = (\n  nativeEvent: Partial<Adaptable<NativeEvent>>\n) => {\n  const gestureEvent = event([{ nativeEvent }]);\n  return {\n    onHandlerStateChange: gestureEvent,\n    onGestureEvent: gestureEvent,\n  };\n};\n\nexport const panGestureHandler = () => {\n  const x = new Value(0);\n  const translationX = new Value(0);\n  const velocityX = new Value(0);\n  const y = new Value(0);\n  const translationY = new Value(0);\n  const velocityY = new Value(0);\n  const state = new Value(State.UNDETERMINED);\n  const gestureHandler = onGestureEvent({\n    x,\n    translationX,\n    velocityX,\n    y,\n    translationY,\n    velocityY,\n    state,\n  });\n  return {\n    x,\n    translationX,\n    velocityX,\n    y,\n    translationY,\n    velocityY,\n    state,\n    gestureHandler,\n  };\n};\n\nexport const horizontalPanGestureHandler = () => {\n  const x = new Value(0);\n  const translationX = new Value(0);\n  const velocityX = new Value(0);\n  const state = new Value(State.UNDETERMINED);\n  const gestureHandler = onGestureEvent({\n    translationX,\n    velocityX,\n    state,\n  });\n  return {\n    x,\n    translationX,\n    state,\n    velocityX,\n    gestureHandler,\n  };\n};\n\nexport const verticalPanGestureHandler = () => {\n  const y = new Value(0);\n  const translationY = new Value(0);\n  const velocityY = new Value(0);\n  const state = new Value(State.UNDETERMINED);\n  const gestureHandler = onGestureEvent({\n    y,\n    translationY,\n    velocityY,\n    state,\n  });\n  return {\n    y,\n    translationY,\n    state,\n    velocityY,\n    gestureHandler,\n  };\n};\n\nexport const debugGestureState = (\n  label: string,\n  state: Animated.Node<State>\n) => {\n  const d = (value: string): Animated.Node<number> =>\n    // eslint-disable-next-line @typescript-eslint/ban-ts-ignore\n    // @ts-ignore\n    debug(label, new Value(value));\n  return onChange(\n    state,\n    cond(\n      eq(state, State.UNDETERMINED),\n      d(\"UNDETERMINED\"),\n      cond(\n        eq(state, State.BEGAN),\n        d(\"BEGAN\"),\n        cond(\n          eq(state, State.ACTIVE),\n          d(\"ACTIVE\"),\n          cond(\n            eq(state, State.END),\n            d(\"END\"),\n            cond(eq(state, State.CANCELLED), d(\"CANCELLED\"), d(\"FAILED\"))\n          )\n        )\n      )\n    )\n  );\n};\n"]}